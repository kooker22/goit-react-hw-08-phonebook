(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{20:function(e,t,n){e.exports={menu:"AuthNav_menu__33Ydd",link:"AuthNav_link__ygLgX",btn:"AuthNav_btn__3wPFK"}},23:function(e,t,n){e.exports={container:"UserMenu_container__1GaCN",avatar:"UserMenu_avatar__3h4W0",name:"UserMenu_name__2KwO5",link:"UserMenu_link__17uVH",btn:"UserMenu_btn__2K0FC"}},48:function(e,t,n){e.exports={link:"NavBar_link__eiyMd"}},49:function(e,t,n){e.exports=n.p+"static/media/default-avatar.ccafcf34.png"},50:function(e,t,n){},52:function(e,t,n){e.exports=n(83)},6:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return _}));var r,c,a,u,o=n(1),s={registerRequest:Object(o.b)("auth/registerRequest"),registerSuccess:Object(o.b)("auth/registerSuccess"),registerError:Object(o.b)("auth/registerError"),loginRequest:Object(o.b)("auth/loginRequest"),loginSuccess:Object(o.b)("auth/loginSuccess"),loginError:Object(o.b)("auth/loginError"),logoutRequest:Object(o.b)("auth/logoutRequest"),logoutSuccess:Object(o.b)("auth/logoutSuccess"),logoutError:Object(o.b)("auth/logoutError"),getCurrentUserRequest:Object(o.b)("auth/getCurrentUserRequest"),getCurrentUserSucces:Object(o.b)("auth/getCurrentUserSucces"),getCurrentUserError:Object(o.b)("auth/getCurrentUserError")},i=n(2),l=n(5),b={name:null,email:null},f=Object(o.c)(b,(r={},Object(i.a)(r,s.registerSuccess,(function(e,t){return t.payload.user})),Object(i.a)(r,s.loginSuccess,(function(e,t){return t.payload.user})),Object(i.a)(r,s.logoutSuccess,(function(e,t){return b})),Object(i.a)(r,s.getCurrentUserSucces,(function(e,t){return t.payload})),r)),d=Object(o.c)(null,(c={},Object(i.a)(c,s.registerSuccess,(function(e,t){return t.payload.token})),Object(i.a)(c,s.loginSuccess,(function(e,t){return t.payload.token})),Object(i.a)(c,s.logoutSuccess,(function(){return null})),c)),g=function(e,t){return t.payload},j=Object(o.c)(null,(a={},Object(i.a)(a,s.registerError,g),Object(i.a)(a,s.loginError,g),Object(i.a)(a,s.logoutError,g),Object(i.a)(a,s.getCurrentUserError,g),a)),O=Object(o.c)(!1,(u={},Object(i.a)(u,s.registerSuccess,(function(){return!0})),Object(i.a)(u,s.loginSuccess,(function(){return!0})),Object(i.a)(u,s.getCurrentUserSucces,(function(){return!0})),Object(i.a)(u,s.registerError,(function(){return!1})),Object(i.a)(u,s.loginError,(function(){return!1})),Object(i.a)(u,s.getCurrentUserError,(function(){return!1})),Object(i.a)(u,s.logoutSuccess,(function(){return!1})),u)),p=Object(l.c)({user:f,token:d,isAuthenticated:O,error:j}),m=n(16),h=n.n(m),E=n(22),v=n(18),k=n.n(v);k.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var C=function(e){k.a.defaults.headers.common.Authorization="Bearer ".concat(e)},S=function(){k.a.defaults.headers.common.Authorization=""},y={register:function(e){return function(){var t=Object(E.a)(h.a.mark((function t(n){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(s.registerRequest()),t.prev=1,t.next=4,k.a.post("/users/signup",e);case 4:r=t.sent,C(r.data.token),n(s.registerSuccess(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(s.registerError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(){return function(){var e=Object(E.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(s.loginRequest),e.prev=1,e.next=4,k.a.post("users/logout");case 4:S(),t(s.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(s.logoutError(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(e){return function(){var t=Object(E.a)(h.a.mark((function t(n){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(s.loginRequest),t.prev=1,t.next=4,k.a.post("users/login",e);case 4:r=t.sent,C(r.data.token),n(s.loginSuccess(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(s.loginError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(E.a)(h.a.mark((function e(t,n){var r,c,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),c=r.auth.token){e.next=3;break}return e.abrupt("return");case 3:return C(c),t(s.getCurrentUserRequest()),e.prev=5,e.next=8,k.a.get("/users/current");case 8:a=e.sent,t(s.getCurrentUserSucces(a.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(s.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()}},_={getIsAuthenticated:function(e){return e.auth.isAuthenticated},getUserName:function(e){return e.auth.user.name}}},83:function(e,t,n){"use strict";n.r(t);var r,c,a=n(0),u=n.n(a),o=n(24),s=n.n(o),i=n(15),l=n(45),b=n(7),f=n(1),d=n(17),g=n(47),j=n.n(g),O=n(2),p=n(51),m=n(5),h=n(9),E=Object(f.c)([],(r={},Object(O.a)(r,h.j,(function(e,t){return t.payload})),Object(O.a)(r,h.c,(function(e,t){var n=t.payload;return[].concat(Object(p.a)(e),[n])})),Object(O.a)(r,h.g,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),r)),v=Object(f.c)("",Object(O.a)({},h.d,(function(e,t){return t.payload}))),k=Object(f.c)(!1,(c={},Object(O.a)(c,h.i,(function(){return!0})),Object(O.a)(c,h.j,(function(){return!1})),Object(O.a)(c,h.h,(function(){return!1})),Object(O.a)(c,h.b,(function(){return!0})),Object(O.a)(c,h.c,(function(){return!1})),Object(O.a)(c,h.a,(function(){return!1})),Object(O.a)(c,h.f,(function(){return!0})),Object(O.a)(c,h.g,(function(){return!1})),Object(O.a)(c,h.e,(function(){return!1})),c)),C=Object(f.c)(null,{}),S=Object(m.c)({contacts:E,filter:v,loading:k,error:C}),y=n(6),_={key:"auth",storage:j.a,whitelist:["token"]},U=Object(f.a)({reducer:{auth:Object(d.g)(_,y.b),phonebook:S},devTools:!1,middleware:Object(f.d)({serializableCheck:{ignoredActions:[d.a,d.f,d.b,d.c,d.d,d.e]}})}),A={store:U,persistor:Object(d.h)(U)},x=n(31),N=n(32),w=n(34),R=n(33),q=n(4),M=n(48),T=n.n(M),I=Object(b.b)((function(e){return{isAuthenticated:y.c.getIsAuthenticated(e)}}))((function(e){var t=e.isAuthenticated;return u.a.createElement("nav",null,t&&u.a.createElement(i.b,{to:"/contacts",exact:!0,className:T.a.link},"Phonebook"))})),L=n(49),z=n.n(L),P=n(23),F=n.n(P),B={onLogout:y.a.logOut},G=Object(b.b)((function(e){return{name:y.c.getUserName(e),avatar:z.a}}),B)((function(e){var t=e.avatar,n=e.name,r=e.onLogout;return u.a.createElement("div",{className:F.a.container},u.a.createElement("img",{src:t,alt:"",width:"32",className:F.a.avatar}),u.a.createElement("span",{className:F.a.name},"Welcome, ",n),u.a.createElement("button",{type:"button",className:F.a.btn,onClick:r},"Logout"))})),K=n(20),J=n.n(K),W=function(){return u.a.createElement("div",{className:J.a.menu},u.a.createElement("button",{type:"button",className:J.a.btn},u.a.createElement(i.b,{to:"/register",exact:!0,className:J.a.link},"Sign Up")),u.a.createElement("button",{type:"button",className:J.a.btn},u.a.createElement(i.b,{to:"/login",exact:!0,className:J.a.link},"Log in")))},D=n(50),H=n.n(D),V=Object(b.b)((function(e){return{isAuthenticated:y.c.getIsAuthenticated(e)}}))((function(e){var t=e.isAuthenticated;return u.a.createElement("header",{className:H.a.header},u.a.createElement(I,null),t?u.a.createElement(G,null):u.a.createElement(W,null))})),X=n(26),Y=Object(b.b)((function(e){return{isAuthenticated:y.c.getIsAuthenticated(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,r=e.redirectTo,c=Object(X.a)(e,["component","isAuthenticated","redirectTo"]);return u.a.createElement(q.b,Object.assign({},c,{render:function(e){return n?u.a.createElement(t,e):u.a.createElement(q.a,{to:r})}}))})),Q=Object(b.b)((function(e){return{isAuthenticated:y.c.getIsAuthenticated(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,r=e.redirectTo,c=Object(X.a)(e,["component","isAuthenticated","redirectTo"]);return u.a.createElement(q.b,Object.assign({},c,{render:function(e){return n&&c.restricted?u.a.createElement(q.a,{to:r}):u.a.createElement(t,e)}}))})),Z=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(4)]).then(n.bind(null,161))})),$=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,165))})),ee=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,158))})),te=function(e){Object(w.a)(n,e);var t=Object(R.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurretnUser()}},{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(V,null),u.a.createElement(a.Suspense,{fallback:u.a.createElement("p",null,"Loading... ")},u.a.createElement(q.d,null,u.a.createElement(Y,{exact:!0,path:"/contacts",component:Z,redirectTo:"/login"}),u.a.createElement(Q,{path:"/register",restricted:!0,redirectTo:"/",component:$}),u.a.createElement(Q,{restricted:!0,redirectTo:"/contacts",path:"/login",component:ee}))))}}]),n}(a.Component),ne={onGetCurretnUser:y.a.getCurrentUser},re=Object(b.b)(null,ne)(te);n(82);s.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(b.a,{store:A.store},u.a.createElement(l.a,{loading:null,persistor:A.persistor},u.a.createElement(i.a,null,u.a.createElement(re,null))))),document.getElementById("root"))},9:function(e,t,n){"use strict";n.d(t,"i",(function(){return c})),n.d(t,"j",(function(){return a})),n.d(t,"h",(function(){return u})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return i})),n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return b})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return d}));var r=n(1),c=Object(r.b)("contacts/fetchContactsRequest"),a=Object(r.b)("contacts/fetchContactsSuccess"),u=Object(r.b)("contacts/fetchContactsError"),o=Object(r.b)("contacts/addContactSuccess"),s=Object(r.b)("contacts/addContactRequest"),i=Object(r.b)("contacts/addContactError"),l=Object(r.b)("contacts/deleteContactSuccess"),b=Object(r.b)("contacts/deleteContactRequest"),f=Object(r.b)("contacts/deleteContactError"),d=Object(r.b)("phonebook/changeFilter",(function(e){return{payload:e}}))}},[[52,2,3]]]);
//# sourceMappingURL=main.9f5f9839.chunk.js.map